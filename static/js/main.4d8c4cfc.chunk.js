(this["webpackJsonpsnake-game"]=this["webpackJsonpsnake-game"]||[]).push([[0],{22:function(e,t,n){e.exports=n(30)},27:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),i=n.n(o),c=(n(27),n(4)),u=n(14),l=n(15),s=n(3),d=n(21),p=n(19),h=n(7),m=n(9),f=n(20),v="UP",b="LEFT",y="RIGHT",w="DOWN",k={38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT"},O=function(e,t,n){var a=Object(c.a)(e,2),r=a[0],o=a[1];if(r>n[0]||o>n[1]||-1===r||-1===o)throw new Error("Game over");switch(t){case v:return[r-1,o];case w:return[r+1,o];case b:return[r,o-1];case y:return[r,o+1]}return e},E=function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return[Math.trunc(Math.random()*n),Math.trunc(Math.random()*a)]},j=function(e,t){var n=Math.trunc(Math.min(e,t)/2);return{snake:{currentMove:"RIGHT",limit:[e,t],body:[[n,n],[n,n-1],[n,n-2]]},apple:E([e,t]),size:[e,t]}},x=n(1),g=n(2);function M(){var e=Object(x.a)(["\n  width: 15px;\n  height: 15px;\n  background: ","; \n  border-radius: ",";\n"]);return M=function(){return e},e}var D=g.a.div(M(),(function(e){var t=e.snake,n=e.apple,a=e.dash;return t?"#000":n?"red":a?"#a8e335":"#B2EE4A"}),(function(e){return e.apple?"50%":"0px 0px 0px 0px"}));function G(){var e=Object(x.a)(["\n  position: absolute;\n  text-align: center;\n"]);return G=function(){return e},e}function T(){var e=Object(x.a)(["\n  color: #000;\n  cursor: pointer;\n  text-decoration: underline;\n"]);return T=function(){return e},e}var U=g.a.span(T()),C=g.a.div(G()),I=function(e){var t=e.title,n=e.btnText,a=e.onClick;return r.a.createElement(C,null,r.a.createElement("h1",{style:{marginTop:0}},t),r.a.createElement(U,{onClick:function(){return a()},role:"button"},n))};function K(){var e=Object(x.a)(["\n  width: ","px;\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 4px solid #000;\n"]);return K=function(){return e},e}function S(){var e=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return S=function(){return e},e}function A(){var e=Object(x.a)(["\n  display: flex;\n  margin: 20px;\n  border: 4px solid #000; \n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return A=function(){return e},e}var H=g.a.div(A()),L=g.a.div(S()),N=g.a.div(K(),(function(e){return 15.11*e.width})),R=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(u.a)(this,n),(a=t.call(this,e)).width=void 0,a.height=void 0,a.width=parseInt("".concat((document.body.offsetWidth-60)/2/15)),a.height=parseInt("".concat((document.body.offsetHeight-60)/2/15));var r=j(a.height,a.width);return a.state={board:r,lastUpdate:Date.now(),time:80,points:0,gameOver:!1,inGame:!1},a.start=a.start.bind(Object(s.a)(a)),a.loop=a.loop.bind(Object(s.a)(a)),a.handleKeyDown=a.handleKeyDown.bind(Object(s.a)(a)),a}return Object(l.a)(n,[{key:"update",value:function(e){var t=this.state,n=t.board,a=t.points;try{var r=function(e,t){if(t.body.find((function(t){return t[0]===e[0]&&t[1]===e[1]}))){var n=O(t.body[0],t.currentMove,t.limit);return t.body=[n].concat(t.body),[E(t.limit),t,!0]}return[e,t,!1]}(n.apple,n.snake),o=Object(c.a)(r,3),i=o[0],u=o[1],l=o[2];n.snake.body=function(e){var t=Object(c.a)(e.body,1)[0],n=[O(t,e.currentMove,e.limit)].concat(Object(f.a)(e.body));return n.pop(),n}(u),n.snake.currentMove=e||n.snake.currentMove,n.apple=i;var s=l?a+10:a;this.setState({board:n,lastUpdate:Date.now(),points:s,time:Math.max(50,80-s/5)})}catch(d){this.setState({gameOver:!0,lastUpdate:Date.now(),points:0,time:80})}}},{key:"loop",value:function(){var e=this.state,t=e.lastUpdate,n=e.time,a=e.gameOver;Date.now()-t>=n&&this.update(),a||window.requestAnimationFrame(this.loop)}},{key:"handleKeyDown",value:function(e){var t=this.state.board,n=k[e.keyCode];(function(e,t){if(e===t)return!1;switch(t){case v:return e!==w;case w:return e!==v;case b:return e!==y;case y:return e!==b}return!1})(t.snake.currentMove,n)&&this.update(n)}},{key:"start",value:function(){var e=this,t=j(this.height,this.width);this.setState({board:t,gameOver:!1,inGame:!0},(function(){e.loop()}))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.state,t=e.board,n=e.points,a=e.time,o=e.gameOver,i=e.inGame;return r.a.createElement(L,null,r.a.createElement(N,{width:this.width},r.a.createElement("p",null,"Pontos: ",r.a.createElement("b",null,n)),r.a.createElement("p",null,"Time: ",r.a.createElement("b",null,a))),r.a.createElement(H,null,!i&&r.a.createElement(I,{title:"SNAKE GAME",btnText:"Start",onClick:this.start}),o&&r.a.createElement(I,{title:"GAME OVER",btnText:"New Game",onClick:this.start}),function(e){for(var t=e.snake.body.reduce((function(e,t,n){return Object(m.a)(Object(m.a)({},e),{},Object(h.a)({},t.join("-"),n))}),{}),n=[],a=0;a<e.size[0];a++){n[a]=[];for(var r=0;r<e.size[1];r++){var o=t["".concat(a,"-").concat(r)];e.apple[0]!==a||e.apple[1]!==r?n[a][r]=o>=0?0===o?-2:-1:0:n[a][r]=1}}return n}(t).map((function(e,t){return r.a.createElement("div",{key:"row-".concat(t),style:{display:"flex"}},e.map((function(e,n){return r.a.createElement(D,{key:"col-".concat(t,"-").concat(n),snake:e<0,head:e<-1,dash:t%2===0?n%2===0:n%2!==0,apple:1===e})})))}))))}}]),n}(r.a.Component);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.4d8c4cfc.chunk.js.map